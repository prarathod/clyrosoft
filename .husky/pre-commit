#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo 'ğŸš§âœ¨ Preparing your code for greatness: formatting, linting, and building before commit ğŸš§âœ¨'

# Check Prettier standards
npm run check-format ||
(
    echo 'ğŸš¨ Oops! Code formatting is out of alignment. ğŸš¨ 
            Prettier check failed. Run `npm run format`, make the changes, and try committing again.'
    false;
)

# Check ESLint standards
npm run check-lint --max-warnings=0 ||
(
    echo 'ğŸ›‘ ESLint has flagged some issues. ğŸ›‘
            Please fix the errors listed above, make necessary changes, and try committing again.'
    false; 
)

# Check TypeScript standards
npm run check-types ||
(
    echo 'âš ï¸ TypeScript type check failed! âš ï¸
            Some type issues need attention before committing. Please review the errors and correct them.'
    false;
)

# Build the project
echo 'ğŸ§ Everything looks good so far... Letâ€™s ensure it builds properly. ğŸ§'

npm run build ||
(
    echo 'âŒ Build process failed. âŒ 
            Please check the errors above and fix them before proceeding.'
    false;
)

# If everything passes... Now we can commit
echo 'âœ… All checks passed! Your code is ready for commit. Great job! âœ…'
